<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/public/images/favicon.ico">
    
    <title>Arch Linux ARM</title>
    
    <link rel="stylesheet" type="text/css" href="/public/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/jquery.smartmenus.bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/custom.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/dataTables.bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/default.min.css"/>
    
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="/public/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/public/js/ie10-viewport-bug-workaround.js"></script>
    <script type="text/javascript" src="/public/js/jquery.smartmenus.min.js"></script>
    <script type="text/javascript" src="/public/js/jquery.smartmenus.bootstrap.min.js"></script>
    <script type="text/javascript" src="/public/js/datatables.min.js"></script>
    <script type="text/javascript" src="/public/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="/public/js/highlight.pack.js"></script>
    <script type="text/javascript" src="/public/js/bootstrap-typeahead.min.js"></script>
    <script>hljs.configure({languages: []});hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="/public/js/date.format.min.js"></script>
  </head>

  <body>
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/public/images/alarm.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav sm">
                    <li><a href="/about">About</a>
                      <ul class="dropdown-menu">
                    <li><a href="/about/contact">Contact</a></li>
                    <li><a href="/about/donate">Donate</a></li>
                    <li><a href="/about/downloads">Downloads</a></li>
                    <li><a href="/about/mirrors">Mirrors</a></li>
                    <li><a href="/about/package-signing">Package Signing</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms">Platforms</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv5">ARMv5</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv5/arietta-g25">Arietta G25</a></li>
                    <li><a href="/platforms/armv5/guruplug-display">Guruplug Display</a></li>
                    <li><a href="/platforms/armv5/olinuxino">OLinuXino</a></li>
                    <li><a href="/platforms/armv5/openrd">OpenRD</a></li>
                    <li><a href="/platforms/armv5/pogoplug-series-4">Pogoplug Series 4</a></li>
                    <li><a href="/platforms/armv5/pogoplug-v2-pinkgray">Pogoplug v2 (Pink/Gray)</a></li>
                    <li><a href="/platforms/armv5/seagate-dockstar">Seagate DockStar</a></li>
                    <li><a href="/platforms/armv5/seagate-goflex-home">Seagate GoFlex Home</a></li>
                    <li><a href="/platforms/armv5/seagate-goflex-net">Seagate GoFlex Net</a></li>
                    <li><a href="/platforms/armv5/sheevaplug">SheevaPlug</a></li>
                    <li><a href="/platforms/armv5/tonidoplug">TonidoPlug</a></li>
                    <li><a href="/platforms/armv5/tonidoplug-2">TonidoPlug 2</a></li>
                    <li><a href="/platforms/armv5/zyxel-nsa320">ZyXEL NSA320</a></li>
                    <li><a href="/platforms/armv5/zyxel-nsa325">ZyXEL NSA325</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv6">ARMv6</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv6/raspberry-pi">Raspberry Pi</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7">ARMv7</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/allwinner">AllWinner</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/allwinner/a10-olinuxino-lime">A10 OlinuXino Lime</a></li>
                    <li><a href="/platforms/armv7/allwinner/a20-olinuxino-lime">A20 OlinuXino Lime</a></li>
                    <li><a href="/platforms/armv7/allwinner/a20-olinuxino-lime2">A20 OlinuXino Lime2</a></li>
                    <li><a href="/platforms/armv7/allwinner/a20-olinuxino-micro">A20 OlinuXino Micro</a></li>
                    <li><a href="/platforms/armv7/allwinner/cubieboard">Cubieboard</a></li>
                    <li><a href="/platforms/armv7/allwinner/cubieboard-2">Cubieboard 2</a></li>
                    <li><a href="/platforms/armv7/allwinner/cubietruck">Cubietruck</a></li>
                    <li><a href="/platforms/armv7/allwinner/pcduino3">pcDuino3</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/amlogic">Amlogic</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/amlogic/odroid-c1">ODROID-C1</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/arm">ARM</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/arm/versatile-express">Versatile Express</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/broadcom">Broadcom</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/broadcom/raspberry-pi-2">Raspberry Pi 2</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/freescale">Freescale</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/freescale/cubox-i">CuBox-i</a></li>
                    <li><a href="/platforms/armv7/freescale/nitrogen6x">Nitrogen6X</a></li>
                    <li><a href="/platforms/armv7/freescale/udoo">UDOO</a></li>
                    <li><a href="/platforms/armv7/freescale/usb-armory">USB Armory</a></li>
                    <li><a href="/platforms/armv7/freescale/utilite">Utilite</a></li>
                    <li><a href="/platforms/armv7/freescale/wandboard">Wandboard</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/marvell">Marvell</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/marvell/clearfog">ClearFog</a></li>
                    <li><a href="/platforms/armv7/marvell/cubox">CuBox</a></li>
                    <li><a href="/platforms/armv7/marvell/d3plug">D3Plug</a></li>
                    <li><a href="/platforms/armv7/marvell/mirabox">Mirabox</a></li>
                    <li><a href="/platforms/armv7/marvell/smile-plug">SMILE Plug</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/nvidia">nVidia</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/nvidia/trimslice">TrimSlice</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/rockchip">Rockchip</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/rockchip/asus-chromebit-cs10">Asus Chromebit CS10</a></li>
                    <li><a href="/platforms/armv7/rockchip/asus-chromebook-flip-c100p">Asus Chromebook Flip C100P</a></li>
                    <li><a href="/platforms/armv7/rockchip/hisense-chromebook-c11">Hisense Chromebook C11</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/samsung">Samsung</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/samsung/odroid-u2">ODROID-U2</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-u3">ODROID-U3</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-x">ODROID-X</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-x2">ODROID-X2</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-xu">ODROID-XU</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-xu3">ODROID-XU3</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-xu4">ODROID-XU4</a></li>
                    <li><a href="/platforms/armv7/samsung/samsung-chromebook">Samsung Chromebook</a></li>
                    <li><a href="/platforms/armv7/samsung/samsung-chromebook-2">Samsung Chromebook 2</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/ti">TI</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/ti/beagleboard">BeagleBoard</a></li>
                    <li><a href="/platforms/armv7/ti/beagleboard-xm">BeagleBoard-xM</a></li>
                    <li><a href="/platforms/armv7/ti/beaglebone">BeagleBone</a></li>
                    <li><a href="/platforms/armv7/ti/beaglebone-black">BeagleBone Black</a></li>
                    <li><a href="/platforms/armv7/ti/chiliboard">ChiliBoard</a></li>
                    <li><a href="/platforms/armv7/ti/pandaboard">PandaBoard</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/xilinx">Xilinx</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/xilinx/zedboard">ZedBoard</a></li>
                      </ul>
                    </li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8">ARMv8</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/amlogic">Amlogic</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/amlogic/odroid-c2">ODROID-C2</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8/arm">ARM</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/arm/juno">Juno</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8/broadcom">Broadcom</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/broadcom/raspberry-pi-3">Raspberry Pi 3</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8/generic">Generic</a></li>
                      </ul>
                    </li>
                      </ul>
                    </li>
                    <li><a href="/packages">Packages</a></li>
                    <li><a href="/forum">Forum</a></li>
                    <li><a href="/wiki">Wiki</a></li>
          </ul>
          
          <ul class="nav navbar-nav navbar-right">
            <li>
                <a href="/login"><img src="/public/images/GitHub-Mark-16px.png">&nbsp;Sign In</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <h2 id="installtoasdcard">Install to a SD card</h2>

<p>Replace <b>sdX</b> in the following instructions with the device name for the SD card as it appears on your computer.</p>

<ol><li>Zero the beginning of the SD card:
<pre>dd if=/dev/zero of=/dev/sdX bs=1M count=8</pre>
<li>Start parted to partition the SD card:
<pre>parted /dev/sdX</pre>
<li>At the parted prompt, type the following commands to create an ESP partition and root partition:
<pre>(parted) mklabel gpt                                                      
(parted) mkpart ESP fat32 1MiB 513MiB
(parted) set 1 boot on                                                    
(parted) mkpart primary ext4 513MiB 100%                                  
(parted) quit</pre>
<li>Create and mount the FAT filesystem:
<pre>mkfs.vfat -F 32 -n "Arch Boot" /dev/sdX1
mkdir boot
mount /dev/sdX1 boot</pre>
<li>Create and mount the ext4 filesystem:
<pre>mkfs.ext4 /dev/sdX2
mkdir root
mount /dev/sdX2 root</pre>
<li>Download and extract the root filesystem (as root, not via sudo):
<pre>wget http://os.archlinuxarm.org/os/ArchLinuxARM-armv7-latest.tar.gz
bsdtar -xpf ArchLinuxARM-armv7-latest.tar.gz -C root
sync</pre>
<li>Move boot files to the first partition:
<pre>mv root/boot/* boot</pre>
<li>Edit mnt/etc/fstab and add the following line to the end:
<pre>/dev/mmcblk0p1  /boot   vfat    defaults        0       0</pre>
<li>Unmount the two partitions:
<pre>umount boot root</pre>
<li>Insert the SD card into the Versatile Express.
</ol>

<h2 id="updatefirmware">Update Firmware</h2>

<ol><li>Connect to the upper right serial port (UART0) at 38400bps.
<li>Connect a USB A-to-B cable to the USB port next to the serial port.
<li>Ensure both dip switches next to the black reset button are in the up position, and apply power.
<li>At the serial command prompt, type <i>usb_on</i> to enable mass storage access over USB:
<pre>Cmd> usb_on</pre>
<li>Mount the new USB device partition, and delete all files from it.
<pre>mount /dev/sdx1 mnt
rm -rf mnt/*</pre>
<li>Clone the vexpress-firmware git repo, and copy all of the files to the mount point:
<pre>git clone git://git.linaro.org/arm/vexpress-firmware.git
cp -a  vexpress-firmware/* mnt</pre>
<li>(optional) Edit config.txt in the mount point and change AUTORUN to TRUE to boot on power-on.
<li>Unmount the partition:
<pre>umount mnt</pre>
<li>Reboot the board.
<li>At the command prompt, type the following commands:
<pre>Cmd> flash
Flash> eraseall
Flash> exit
Cmd> reboot</pre>
<li>After reboot, the new firmware will be flashed automatically.
<li>Once at the command prompt again, set the dip switch closest to the black reset button to the down position.
<li>Press the black reset button, which will restart the board and launch the UEFI firmware.  Interrupt this by pressing enter on the serial console.
</ol>

<h2 id="configureuefi">Configure UEFI</h2>

<ol><li>Interrupt UEFI auto-boot by pressing enter on the serial console when the UEFI firmware starts.
<li>Select option <b>3</b> for the Boot Manager:
<pre>UEFI firmware (version ea31f8e built at 19:14:42 on Sep  8 2015)
The default boot selection will start in   2 seconds
[1] zImage with ramdisk.img and board.dtb in NOR Flash
        - VenHw(E7223039-5836-41E1-B542-D7EC736C5E59)/zImage
        - Initrd: VenHw(E7223039-5836-41E1-B542-D7EC736C5E59)/ramdisk.img
        - Arguments: console=ttyAMA0,38400 rootwait androidboot.hardware=arm-versatileexpress-usb root=/dev/sda2
        - LoaderType: Linux kernel with FDT support
-----------------------
FDT Device Paths
        - VenHw(1F15DA3C-37FF-4070-B471-BB4AF12A724A)/board.dtb
-----------------------
[2] Shell
[3] Boot Manager
[4] Reboot
[5] Shutdown
Start: <b>3</b></pre>
<li>Select option <b>3</b> to remove a boot device entry, then select <b>1</b> to delete the original entry:
<pre>[1] Add Boot Device Entry
[2] Update Boot Device Entry
[3] Remove Boot Device Entry
[4] Update FDT path
[5] Return to main menu
Choice: <b>3</b>
[1] zImage with ramdisk.img and board.dtb in NOR Flash
        - VenHw(E7223039-5836-41E1-B542-D7EC736C5E59)/zImage
        - Arguments: console=ttyAMA0,38400 rootwait androidboot.hardware=arm-versatileexpress-usb root=/dev/sda2
Delete entry: <b>1</b></pre>
<li>Select option <b>1</b> to add a boot device entry, select the boot partition created previously, and set the other options as shown here:
<pre>[1] Add Boot Device Entry
[2] Update Boot Device Entry
[3] Remove Boot Device Entry
[4] Update FDT path
[5] Return to main menu
Choice: <b>1</b>
[1] Firmware Volume (0 MB)
[2] Firmware Volume (0 MB)
[3] NOR Flash (63 MB)
[4] NOR Flash (63 MB)
[5] Arch Boot (510 MB)
[6] VenHw(02118005-9DA7-443A-92D5-781F022AEDBB)
[7] PXE on MAC Address: 00:02:F7:00:57:6E
[8] TFTP on MAC Address: 00:02:F7:00:57:6E
Select the Boot Device: <b>5</b>
File path of the EFI Application or the kernel: <b>zImage</b>
Is an EFI Application? [y/n] <b>n</b>
Has FDT support? [y/n] <b>y</b>
Add an initrd: [y/n] <b>n</b>
Arguments to pass to the binary: <b>console=ttyAMA0,38400 root=/dev/mmcblk0p2 rw rootwait</b>
Description for this new Entry: <b>Arch Linux ARM</b></pre>
<li>Select option <b>4</b> to update the FDT path, select the boot partition previously created, and type in the file path corresponding to your CoreTile (with a <i>backslash</i>):
<ul><li>V2P-CA5: dtbs\vexpress-v2p-ca5s.dtb
<li>V2P-CA9: dtbs\vexpress-v2p-ca9.dtb
<li>V2P-CA15 (TC1): dtbs\vexpress-v2p-ca15-tc1.dtb
<li>V2P-CA15-CA7 (TC2): dtbs\vexpress-v2p-ca15_a7.dtb</ul>
<pre>[1] Add Boot Device Entry
[2] Update Boot Device Entry
[3] Remove Boot Device Entry
[4] Update FDT path
[5] Return to main menu
Choice: <b>4</b>
[1] Firmware Volume (0 MB)
[2] Firmware Volume (0 MB)
[3] NOR Flash (63 MB)
[4] NOR Flash (63 MB)
[5] Arch Boot (510 MB)
[6] VenHw(02118005-9DA7-443A-92D5-781F022AEDBB)
[7] PXE on MAC Address: 00:02:F7:00:57:6E
[8] TFTP on MAC Address: 00:02:F7:00:57:6E
Select the Boot Device: <b>5</b>
File path of the FDT blob: <b>dtbs\vexpress-v2p-ca15_a7.dtb</b></pre>
<li>Select <b>5</b> to return to the main menu, then select <b>1</b> to start Arch Linux ARM.
<li>Logging in:
<ol style="list-style-type: lower-alpha"><li>From the serial console, the default root password is "root"
<li>An ethernet connection will be automatically assigned an IP.  SSH in with the user/pass alarm/alarm.  SSH as root with a password is disabled by default.</ol>
</ol>

      <hr>
      <p class="small text-center text-muted">Copyright ©2009-2016 Arch Linux ARM<br>
      The registered trademark Linux® is used pursuant to a sublicense from LMI, the exclusive licensee of Linus Torvalds, owner of the mark on a world-wide basis.<br>
      The Arch Linux™ name and logo are used under permission of the Arch Linux Project Lead.<br></p>
    </div>

  </body>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-24579207-1', 'auto');
    ga('send', 'pageview');
  </script>
</html>
