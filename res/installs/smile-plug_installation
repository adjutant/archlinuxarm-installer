<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/public/images/favicon.ico">
    
    <title>Arch Linux ARM</title>
    
    <link rel="stylesheet" type="text/css" href="/public/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/jquery.smartmenus.bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/custom.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/dataTables.bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/public/css/default.min.css"/>
    
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="/public/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/public/js/ie10-viewport-bug-workaround.js"></script>
    <script type="text/javascript" src="/public/js/jquery.smartmenus.min.js"></script>
    <script type="text/javascript" src="/public/js/jquery.smartmenus.bootstrap.min.js"></script>
    <script type="text/javascript" src="/public/js/datatables.min.js"></script>
    <script type="text/javascript" src="/public/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="/public/js/highlight.pack.js"></script>
    <script type="text/javascript" src="/public/js/bootstrap-typeahead.min.js"></script>
    <script>hljs.configure({languages: []});hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript" src="/public/js/date.format.min.js"></script>
  </head>

  <body>
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/public/images/alarm.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav sm">
                    <li><a href="/about">About</a>
                      <ul class="dropdown-menu">
                    <li><a href="/about/contact">Contact</a></li>
                    <li><a href="/about/donate">Donate</a></li>
                    <li><a href="/about/downloads">Downloads</a></li>
                    <li><a href="/about/mirrors">Mirrors</a></li>
                    <li><a href="/about/package-signing">Package Signing</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms">Platforms</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv5">ARMv5</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv5/arietta-g25">Arietta G25</a></li>
                    <li><a href="/platforms/armv5/guruplug-display">Guruplug Display</a></li>
                    <li><a href="/platforms/armv5/olinuxino">OLinuXino</a></li>
                    <li><a href="/platforms/armv5/openrd">OpenRD</a></li>
                    <li><a href="/platforms/armv5/pogoplug-series-4">Pogoplug Series 4</a></li>
                    <li><a href="/platforms/armv5/pogoplug-v2-pinkgray">Pogoplug v2 (Pink/Gray)</a></li>
                    <li><a href="/platforms/armv5/seagate-dockstar">Seagate DockStar</a></li>
                    <li><a href="/platforms/armv5/seagate-goflex-home">Seagate GoFlex Home</a></li>
                    <li><a href="/platforms/armv5/seagate-goflex-net">Seagate GoFlex Net</a></li>
                    <li><a href="/platforms/armv5/sheevaplug">SheevaPlug</a></li>
                    <li><a href="/platforms/armv5/tonidoplug">TonidoPlug</a></li>
                    <li><a href="/platforms/armv5/tonidoplug-2">TonidoPlug 2</a></li>
                    <li><a href="/platforms/armv5/zyxel-nsa320">ZyXEL NSA320</a></li>
                    <li><a href="/platforms/armv5/zyxel-nsa325">ZyXEL NSA325</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv6">ARMv6</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv6/raspberry-pi">Raspberry Pi</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7">ARMv7</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/allwinner">AllWinner</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/allwinner/a10-olinuxino-lime">A10 OlinuXino Lime</a></li>
                    <li><a href="/platforms/armv7/allwinner/a20-olinuxino-lime">A20 OlinuXino Lime</a></li>
                    <li><a href="/platforms/armv7/allwinner/a20-olinuxino-lime2">A20 OlinuXino Lime2</a></li>
                    <li><a href="/platforms/armv7/allwinner/a20-olinuxino-micro">A20 OlinuXino Micro</a></li>
                    <li><a href="/platforms/armv7/allwinner/cubieboard">Cubieboard</a></li>
                    <li><a href="/platforms/armv7/allwinner/cubieboard-2">Cubieboard 2</a></li>
                    <li><a href="/platforms/armv7/allwinner/cubietruck">Cubietruck</a></li>
                    <li><a href="/platforms/armv7/allwinner/pcduino3">pcDuino3</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/amlogic">Amlogic</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/amlogic/odroid-c1">ODROID-C1</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/arm">ARM</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/arm/versatile-express">Versatile Express</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/broadcom">Broadcom</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/broadcom/raspberry-pi-2">Raspberry Pi 2</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/freescale">Freescale</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/freescale/cubox-i">CuBox-i</a></li>
                    <li><a href="/platforms/armv7/freescale/nitrogen6x">Nitrogen6X</a></li>
                    <li><a href="/platforms/armv7/freescale/udoo">UDOO</a></li>
                    <li><a href="/platforms/armv7/freescale/usb-armory">USB Armory</a></li>
                    <li><a href="/platforms/armv7/freescale/utilite">Utilite</a></li>
                    <li><a href="/platforms/armv7/freescale/wandboard">Wandboard</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/marvell">Marvell</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/marvell/clearfog">ClearFog</a></li>
                    <li><a href="/platforms/armv7/marvell/cubox">CuBox</a></li>
                    <li><a href="/platforms/armv7/marvell/d3plug">D3Plug</a></li>
                    <li><a href="/platforms/armv7/marvell/mirabox">Mirabox</a></li>
                    <li><a href="/platforms/armv7/marvell/smile-plug">SMILE Plug</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/nvidia">nVidia</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/nvidia/trimslice">TrimSlice</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/rockchip">Rockchip</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/rockchip/asus-chromebit-cs10">Asus Chromebit CS10</a></li>
                    <li><a href="/platforms/armv7/rockchip/asus-chromebook-flip-c100p">Asus Chromebook Flip C100P</a></li>
                    <li><a href="/platforms/armv7/rockchip/hisense-chromebook-c11">Hisense Chromebook C11</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/samsung">Samsung</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/samsung/odroid-u2">ODROID-U2</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-u3">ODROID-U3</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-x">ODROID-X</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-x2">ODROID-X2</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-xu">ODROID-XU</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-xu3">ODROID-XU3</a></li>
                    <li><a href="/platforms/armv7/samsung/odroid-xu4">ODROID-XU4</a></li>
                    <li><a href="/platforms/armv7/samsung/samsung-chromebook">Samsung Chromebook</a></li>
                    <li><a href="/platforms/armv7/samsung/samsung-chromebook-2">Samsung Chromebook 2</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/ti">TI</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/ti/beagleboard">BeagleBoard</a></li>
                    <li><a href="/platforms/armv7/ti/beagleboard-xm">BeagleBoard-xM</a></li>
                    <li><a href="/platforms/armv7/ti/beaglebone">BeagleBone</a></li>
                    <li><a href="/platforms/armv7/ti/beaglebone-black">BeagleBone Black</a></li>
                    <li><a href="/platforms/armv7/ti/chiliboard">ChiliBoard</a></li>
                    <li><a href="/platforms/armv7/ti/pandaboard">PandaBoard</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv7/xilinx">Xilinx</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv7/xilinx/zedboard">ZedBoard</a></li>
                      </ul>
                    </li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8">ARMv8</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/amlogic">Amlogic</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/amlogic/odroid-c2">ODROID-C2</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8/arm">ARM</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/arm/juno">Juno</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8/broadcom">Broadcom</a>
                      <ul class="dropdown-menu">
                    <li><a href="/platforms/armv8/broadcom/raspberry-pi-3">Raspberry Pi 3</a></li>
                      </ul>
                    </li>
                    <li><a href="/platforms/armv8/generic">Generic</a></li>
                      </ul>
                    </li>
                      </ul>
                    </li>
                    <li><a href="/packages">Packages</a></li>
                    <li><a href="/forum">Forum</a></li>
                    <li><a href="/wiki">Wiki</a></li>
          </ul>
          
          <ul class="nav navbar-nav navbar-right">
            <li>
                <a href="/login"><img src="/public/images/GitHub-Mark-16px.png">&nbsp;Sign In</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <ul>
<li>This installation will provide a bare Arch Linux ARM installation <i>without</i> the SMILE software.</li>
<li>There is currently no support for a NAND installation.  The root filesystem must be on SD or USB.</li>
<li>You must update U-Boot on the device for this installation.  If you've updated U-Boot before, you do not need to do it again.</li>
</ul>

<h2 id="updateu-boot">Update U-Boot</h2>

<ol><li>You will need a TFTP server set up to transfer the new U-Boot image.  Set these values in U-Boot to reflect your network settings:
<pre>setenv ipaddr 10.3.0.94
setenv netmask 255.255.255.0
setenv serverip 10.3.0.91</pre>
<li>Download <a href="/builder/mira/uboot.bin">the U-Boot binary</a> into the directory the TFTP server is serving from.
<li>TFTP transfer uboot.bin to the device:
<pre>tftpboot 0x6400000 10.3.0.91:uboot.bin</pre>
<li>The TFTP transfer is successful if you see something like this.  If the image does not successfully transfer, do not proceed to the next step for flashing.
<pre>phyaddr= 0
Using egiga0 device
TFTP from server 10.3.0.91; our IP address is 10.3.0.94
Filename 'uboot.bin'.
Load address: 0x6400000
Loading: #################################################################
         #################################################################
         #################################################################
         #########################################################
done
Bytes transferred = 3696944 (386930 hex)</pre>
<li>If the image transferred successfully, flash it with:
<pre>nand erase 0x0 0x400000
nand write 0x6400000 0x0 0x100000</pre>
<li>Type <i>reset</i> and press enter to reboot the system into the new bootloader version.  Interrupt the auto-boot sequence to get to a command prompt for later steps.
</ol>

<h2 id="microsdcardcreation">Micro SD Card Creation</h2>

<ol><li>Insert a micro SD card into your computer and record which device identifier it is (dmesg | tail)
<li>Make sure it's not mounted (umount /dev/sdX* or umount /dev/mmcblk*)
<li>Start fdisk to partition the SD card:
<pre>fdisk /dev/sdX</pre>
<li>At the fdisk prompt, create the new partitions:
<ol style="list-style-type: lower-alpha"><li>Type <b>n</b>, then <b>p</b> for primary, <b>1</b> for the first partition on the drive, ENTER to accept the default starting sectors, and <b>+100M</b> for the ending sector.
<li>Type <b>t</b> to set the type, then <b>c</b> to set it to FAT.
<li>Type <b>n</b>, then <b>p</b> for primary, <b>2</b> for the second partition, and press ENTER twice to accept default values.
<li>Exit by typing <b>w</b>.</ol>
<li>Create and mount the vfat filesystem:
<pre>mkfs.vfat /dev/sdX1
mkdir boot
mount /dev/sdX1 boot</pre>
<li>Create and mount the ext4 filesystem:
<pre>mkfs.ext4 /dev/sdX2
mkdir root
mount /dev/sdX2 root</pre>
<li>Download and extract the root filesystem:
<pre>wget http://os.archlinuxarm.org/os/ArchLinuxARM-smileplug-latest.tar.gz
bsdtar -xpf ArchLinuxARM-smileplug-latest.tar.gz -C root</pre>
<li>Copy boot files to the boot partition:
<pre>cp root/boot/* boot</pre>
<li>Unmount the partitions:
<pre>umount boot root</pre>
<li>Remove the micro SD card from your computer and insert it into the SMILE Plug next to the power switch.
</ol>

<h2 id="u-bootconfiguration">U-Boot Configuration</h2>

<ol><li>Connect the JTAG box to the UART connector on the SMILE Plug, and the USB cable to your computer.
<li>Open up a terminal to the serial device created by your system (typically something like /dev/ttyUSB0) with the settings 115200n8.
<li>Power on the SMILE Plug, and once you see text press any key to stop auto booting.  You should be at a console that looks like:
<pre>Marvell&gt;&gt;</pre>
<li>Run the following commands to back up the original NAND boot settings, and apply the new SD card boot settings:
<pre>setenv bootcmd_nand "nand read 0x6400000 0x400000 0x400000; run bootargs_nand; bootm 0x6400000"
setenv bootargs_nand "setenv bootargs console=ttyS0,115200"
setenv bootcmd_mmc "mmc rescan 0; fatload mmc 0:1 0x6400000 uImage; run bootargs_mmc; bootm 0x6400000"
setenv bootargs_mmc "setenv bootargs console=ttyS0,115200 root=/dev/mmcblk0p2 rw rootwait"
setenv bootcmd "run bootcmd_mmc"
saveenv
</pre>
<li>Type <i>boot</i> and hit enter, and the system will boot to SD card.
<ul><li>Login as the default user <i>alarm</i> with the password <i>alarm</i>.
<li>The default root password is <i>root</i>.</ul>
</ol>

<h2 id="defaultinstallationinformation">Default Installation Information</h2>

<ul><li>To take advantage of the hardware, the installation by default sets the SMILE Plug up like a wireless access point.
<li>The ethernet port closest to the power connector (eth0) is designated as the WAN port.  This is configured by default to try to get an IP address via DHCP.
<li>The ethernet port closest to the edge (eth1) is designated as the LAN port.  This should be connected to a switch.
<li>The wireless card (wlan0) is configured as an access point with the SSID "SMILE" and a default WPA passphrase of "smileplug".  Configuration of the AP can be done through <i>/etc/hostapd/hostapd.conf</i>.
<li>The eth1 and wlan0 interfaces are bridged together into the interface br0 with the static IP 10.4.0.1.  The dnsmasq combined DHCP and DNS server runs on this interface issuing IPs in the range 10.4.0.5-250.  Configuration of dnsmasq can be done through <i>/etc/dnsmasq.conf</i>.
<li>There are default iptables rules in place to NAT connections on the AP or LAN port through to the connection on the WAN port.
<li>Extra services installed by the user on the device should be made to listen on all interfaces, or on 10.4.0.1.  This will ensure that AP and LAN connected clients can access the service.
</ul>

      <hr>
      <p class="small text-center text-muted">Copyright ©2009-2016 Arch Linux ARM<br>
      The registered trademark Linux® is used pursuant to a sublicense from LMI, the exclusive licensee of Linus Torvalds, owner of the mark on a world-wide basis.<br>
      The Arch Linux™ name and logo are used under permission of the Arch Linux Project Lead.<br></p>
    </div>

  </body>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-24579207-1', 'auto');
    ga('send', 'pageview');
  </script>
</html>
